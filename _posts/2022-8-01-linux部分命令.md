---
layout: post
title: "linux部分命令注意"
tags: ["linux", "arthas"]
---

记录linux部分命令比较少用的选项，随时更新

## curl
curl测试https网址时，如果该网站签名过期，可以添加 -k 参数忽略
curl无法用反斜杠（\）转义post中的单引号，可以用\u0027替换掉单引号

## debian系简单配置开启匿名ftp
```shell
apt install vsftpd
vi /etc/vsftpd.conf
## 修改配置文件anonymous_enable=YES
systemctl restart vsftpd
```
这样ftp服务就开启了，默认匿名文件夹是/srv/ftp目录，将文件放入该目录下，通过ftp://${hostname}即可访问

## 解压
### unzip
unzip可能出现中文乱码的问题，需要指定编码，使用 -O 参数指定，可以尝试GBK，但是部分情况依然会乱码，建议使用unar命令一步到位，无需指定编码。

## sqlite
sqlite没有像mysql一样的show语句，可以通过以下命令查看数据库的相关信息
```shell
sqlite3 user.db #打开user.db文件
.database #查看当前数据库，注意开始的.
.tables #查看当前库中的表，注意开头的.
.quit 或 .exit # 退出，注意开始的.
.help #查看帮助，注意开始的.
```
sql语法和mysql基本相同，这里不再列出。

sqlite查看表结构
```
    select * from sqlite_master;  可以用于程序中获取表结构
    或者命令行中执行 .schema 也可以列出表结构
```
从结果中找到对应的表即可。

## 查看进程打开的fd
通过ps或top拿到进程的pid，执行如下命令
```shell
ls -la /proc/<PID>/fd
```

## mkfifo
mkfifo命令用于创建一个命名管道，如下
```shell
    mkfifo pipe2
```
创建完成后通过ls命令可以看到，之后可以将输出重定向到该管道
```shell
    ls -la > pipe2
```
然后可以新起一个终端，用任意命令读取该管道内容
```shell
    cat pipe2
```
目前看来管道和普通文件操作差不多，但是要注意管道的一个特性：管道大小始终为0，即管道不存储内容，如果没有
消费管道的输出流，那么输入流会阻塞直到输出流被消费，即上面的ls -la > pipe2命令，如果没有执行cat pipe2,
那么这条命令会一直阻塞